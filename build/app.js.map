{"version":3,"sources":["webpack:///./src/App.js","webpack:///./src/store.js","webpack:///./src/common/reducers/index.js","webpack:///./src/common/reducers/session.js","webpack:///./src/gateway/Gateway.js","webpack:///./src/index.js","webpack:///./src/rootReducer.js","webpack:///./src/common/actions/session.js","webpack:///./src/common/actions/types.js"],"names":["Dashboard","loader","App","props","checkingSession","store","hasSession","mapStateToProps","session","INITIAL_STATE","sessionError","state","action","type","payload","Gateway","handlePasswordChange","setState","password","event","target","value","handleUserNameChange","username","handleSubmit","preventDefault","login","error","Component","dispatch","render","document","getElementById","checkSession","get","then","response","post","data","console","log","catch","err","message","logout","SESSION_START","SESSION_END","SESSION_START_FAILED","SET_USER"],"mappings":"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","file":"app.js","sourcesContent":["import React from 'react'\nimport {connect, Provider} from 'react-redux'\nimport {Route, BrowserRouter as Router} from 'react-router-dom'\nimport Gateway from 'gateway/Gateway'\nimport Loadable from 'react-loadable';\n\nconst Dashboard = Loadable({\n  loader: () => import('dashboard/Dashboard')\n})\n\nconst App = props => {\n  if (props.checkingSession) {\n    return <div></div>\n  }\n\n  return (\n    <Provider store={props.store}>\n      <Router>\n        {props.hasSession\n          ? <Dashboard />\n          : <Gateway />\n        }\n      </Router>\n    </Provider>\n  )\n}\n\nconst mapStateToProps = ({session}) => ({...session})\n\nexport default connect(mapStateToProps, {})(App)\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","import {createStore, applyMiddleware} from 'redux'\nimport ReduxThunk from 'redux-thunk'\nimport rootReducer from './rootReducer'\n\nexport default createStore(rootReducer, applyMiddleware(ReduxThunk))\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","import sessionReducer from './session'\n\nexport default {\n  session: sessionReducer\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/reducers/index.js","import {\n  SESSION_START,\n  SESSION_END,\n  SESSION_START_FAILED\n} from 'common/actions/types'\n\nconst INITIAL_STATE = {\n  checkingSession: true,\n  hasSession: false,\n  sessionError: ''\n}\n\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case SESSION_START:\n      return {\n        checkingSession: false,\n        hasSession: true,\n        sessionError: ''\n      }\n    case SESSION_END:\n      return {\n        checkingSession: false,\n        hasSession: false,\n        sessionError: ''\n      }\n    case SESSION_START_FAILED:\n      return {\n        checkingSession: false,\n        hasSession: false,\n        sessionError: action.payload\n      }\n  }\n  return state\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/reducers/session.js","import {connect} from 'react-redux'\nimport React from 'react'\nimport {login} from 'common/actions/session'\n\nclass Gateway extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      username: '',\n      password: '',\n      error: ''\n    }\n  }\n  handlePasswordChange = event => {\n    this.setState({\n      password: event.target.value\n    })\n  }\n  handleUserNameChange = event => {\n    this.setState({\n      username: event.target.value\n    })\n  }\n  handleSubmit = event => {\n    event.preventDefault()\n    this.props.login(this.state.username, this.state.password)\n  }\n  render () {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        {\n          this.state.error !== '' &&\n            <p>{this.state.error}</p>\n        }\n        <div>\n          <label>\n            <strong>Username</strong>\n          </label><br />\n          <input type=\"text\"\n            required\n            value={this.state.username}\n            onChange={this.handleUserNameChange}/>\n        </div>\n        <div>\n          <label>\n            <strong>Password</strong>\n          </label><br />\n          <input type=\"password\"\n            required\n            value={this.state.password}\n            onChange={this.handlePasswordChange}/>\n        </div>\n        <button>Login</button>\n      </form>\n    )\n  }\n}\n\nconst mapStateToProps = ({session}) => ({error: session.sessionError})\nexport default connect(mapStateToProps, {login})(Gateway)\n\n\n\n// WEBPACK FOOTER //\n// ./src/gateway/Gateway.js","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport store from 'store'\nimport App from './App'\nimport {checkSession} from 'common/actions/session'\n\nstore.dispatch(checkSession())\n\nReactDOM.render(\n  <App store={store}/>,\n  document.getElementById('root')\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {combineReducers} from 'redux'\n\nimport commonReducers from 'common/reducers'\n\nexport default combineReducers({\n  ...commonReducers\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/rootReducer.js","import axios from 'axios'\nimport {\n  SESSION_START,\n  SESSION_END,\n  SESSION_START_FAILED\n} from './types'\n\nexport const checkSession = () => dispatch => {\n  return axios.get('/api/check-session')\n    .then(response => {\n      if (response === 'hasSession') {\n        dispatch({\n          type: SESSION_START\n        })\n      } else {\n        dispatch({\n          type: SESSION_END\n        })\n      }\n    })\n}\n\nexport const login = (username, password) => dispatch => {\n  return axios.post('/api/login', {username, password})\n    .then(({data}) => {\n      console.log(data)\n      dispatch({\n        type: SESSION_START\n      })\n    })\n    .catch(err => {\n      dispatch({\n        type: SESSION_START_FAILED,\n        payload: err.message || 'Incorrect username or password'\n      })\n    })\n}\n\nexport const logout = () => dispatch => {\n  return axios.post('/api/logout')\n    .then(response => {\n      dispatch({\n        type: SESSION_END\n      })\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/actions/session.js","export const SESSION_START = 'SESSION_START'\nexport const SESSION_END = 'SESSION_END'\nexport const SESSION_START_FAILED = 'SESSION_START_FAILED'\nexport const SET_USER = 'SET_USER'\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/actions/types.js"],"sourceRoot":""}